# 要件定義書

## 機能概要
`chats/[chatId]` のキャンバスUIにおいて、固定表示すべき要素の固定化と、トラックパッド操作の挙動改善を行う。キャンバス自体のパン/ズームは維持しつつ、誤操作によるテキスト選択や不要なズームを防ぐ。

## ユーザーストーリー
- ユーザーとして、ヘッダーとブランチ一覧が常に見えていてほしい。なぜなら、キャンバスを移動してもナビゲーションを失いたくないから。
- ユーザーとして、トラックパッドの二本指操作で画面を移動したい。なぜなら、拡大縮小ではなくパンを素早く行いたいから。
- ユーザーとして、意図しないテキスト選択を避けたい。なぜなら、ドラッグ操作で内容を選択する必要がないから。

## 機能要件
### 要件1：固定UIの維持
- `Branch`の文字（ヘッダー）とブランチ一覧ボタンはキャンバス移動の影響を受けず固定表示する。
- 受入基準：
  - [ ] キャンバスをドラッグしてもヘッダーとブランチ一覧ボタンが同じ位置に留まること

### 要件2：トラックパッドの二本指操作
- 二本指スクロールでキャンバスがパンできるようにする。
- 二本指での拡大縮小は行わない（ズームはピンチイン/アウトのみ）。
- 受入基準：
  - [ ] 二本指スクロールで上下左右に移動できること
  - [ ] 二本指操作でズームが発生しないこと

### 要件3：ピンチ操作によるズーム
- ピンチアウト/ピンチインでズームを行う。
- 受入基準：
  - [ ] ピンチ操作で拡大縮小できること

### 要件4：ドラッグ時の選択抑制
- トラックパッド押下中のドラッグでテキスト選択が起きないようにする。
- Commandキーを押しているときのみ、ドラッグでキャンバスを移動できるようにする
- 受入基準：
  - [ ] 通常のドラッグでテキスト選択が発生しないこと
  - [ ] Commandキー押下中はテキスト選択が可能なこと

## 非機能要件
- パフォーマンス：入力操作が滑らかで遅延がないこと
- セキュリティ：認証・権限フローを変更しないこと
